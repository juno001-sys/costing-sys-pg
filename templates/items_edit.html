{% extends "base.html" %}

{% block title %}品目編集{% endblock %}

{% block content %}
  <h2>品目編集 (コード: {{ item.code }})</h2>

  <form method="post">
    <div>
      <label>品目名：</label>
      <input type="text" name="name" value="{{ item.name }}" required>
    </div>

    <div style="margin-top: 4px;">
      <label>仕入先：</label>
      <select name="supplier_id">
        <option value="">（未設定）</option>
        {% for s in suppliers %}
          <option value="{{ s.id }}" {% if item.supplier_id == s.id %}selected{% endif %}>
            {{ s.code }} {{ s.name }}
          </option>
        {% endfor %}
      </select>
    </div>

    <div style="margin-top: 4px;">
      <label>ケース入数：</label>
      <input type="text" name="unit" value="{{ item.unit or '' }}" size="6">
    </div>

    <div style="margin-top: 4px;">
      <label>温度帯：</label>
      <select name="temp_zone">
        <option value="">（未設定）</option>
        {% for z in ["冷凍","冷蔵","常温","その他"] %}
          <option value="{{ z }}" {% if item.temp_zone == z %}selected{% endif %}>
            {{ z }}
          </option>
        {% endfor %}
      </select>
    </div>

    <div style="margin-top: 4px;">
      <label>発注単位：</label>
      <input type="text" name="purchase_unit" value="{{ item.purchase_unit or '' }}" size="6">
    </div>

    <div style="margin-top: 4px;">
      <label>在庫管理単位：</label>
      <input type="text" name="inventory_unit" value="{{ item.inventory_unit or '' }}" size="6">
    </div>

    <div style="margin-top: 4px;">
      <label>最小発注単位：</label>
      <input type="text" name="min_purchase_unit" value="{{ item.min_purchase_unit or '' }}" size="6">
    </div>

    <div style="margin-top: 4px;">
      <label>保管コスト（円／月など）：</label>
      <input type="text" name="storage_cost" value="{{ item.storage_cost or '' }}" size="10">
    </div>

    <div style="margin-top: 4px;">
      <label>
        <input type="checkbox" name="is_internal" value="1"
               {% if item.is_internal %}checked{% endif %}>
        内製品
      </label>
    </div>

    <div style="margin-top: 12px;">
      <button type="submit">更新する</button>
      <button
        type="submit"
        name="delete"
        value="1"
        onclick="return confirm('本当に削除しますか？');"
      >
        削除する
      </button>
      <a href="{{ url_for('items_master') }}">戻る</a>
    </div>
  </form>
{% endblock %}
