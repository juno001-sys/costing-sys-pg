<!DOCTYPE html>
<html lang="ja">
  <head>
    <meta charset="utf-8" />
    <title>仕入先マスタ</title>
    <style>
      body {
        font-family: system-ui, sans-serif;
        margin: 20px;
      }
      table {
        border-collapse: collapse;
        width: 100%;
        margin-top: 10px;
      }
      th,
      td {
        border: 1px solid #ccc;
        padding: 4px 6px;
        font-size: 13px;
      }
      th {
        background: #f5f5f5;
      }
      input {
        padding: 2px 4px;
        font-size: 13px;
      }
      .flash {
        color: darkred;
        margin-bottom: 10px;
      }
    </style>
  </head>
  <body>
    <h1>仕入先マスタ</h1>

    <!-- 共通ナビ -->
    <p>
      <a href="{{ url_for('index') }}">ホーム</a> |
      <a href="{{ url_for('new_purchase') }}">取引入力</a> |
      <a href="{{ url_for('items_master') }}">品目マスタ</a>
    </p>
    <hr />

    {% with messages = get_flashed_messages() %} {% if messages %}
    <div class="flash">
      {% for msg in messages %}
      <div>{{ msg }}</div>
      {% endfor %}
    </div>
    {% endif %} {% endwith %}

    <form method="post" action="{{ url_for('suppliers_master') }}">
      <fieldset>
        <legend>新規登録</legend>
        <p>
          コード:
          <input type="text" name="code" required style="width: 80px" />
          仕入先名:
          <input type="text" name="name" required style="width: 200px" />
        </p>
        <p>
          電話:
          <input type="text" name="phone" style="width: 140px" />
          メール:
          <input type="text" name="email" style="width: 200px" />
        </p>
        <p>
          住所:
          <input type="text" name="address" style="width: 400px" />
        </p>
        <p>
          <button type="submit">登録</button>
        </p>
      </fieldset>
    </form>

    <h2>登録済み仕入先</h2>
    <table>
      <thead>
        <tr>
          <th>コード</th>
          <th>仕入先名</th>
          <th>電話</th>
          <th>メール</th>
          <th>住所</th>
        </tr>
      </thead>
      <tbody>
        {% for row in suppliers %}
        <tr>
          <td>
            <a href="{{ url_for('edit_supplier', supplier_id=row['id']) }}">
              {{ row["code"] }}
            </a>
          </td>
          <td>{{ row["name"] }}</td>
          <td>{{ row["phone"] }}</td>
          <td>{{ row["email"] }}</td>
          <td>{{ row["address"] }}</td>
        </tr>
        {% endfor %}
      </tbody>
    </table>
  </body>
</html>
