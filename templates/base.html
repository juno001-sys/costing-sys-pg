<!DOCTYPE html>
<html lang="ja">
  <head>
    <meta charset="UTF-8" />
    <title>{% block title %}TEST Dev{% endblock %}</title>

    <style>
      body {
        font-family: system-ui;
        margin: 40px;
      }
      h1 {
        margin-bottom: 24px;
      }

      /* ============================
         横タブメニュー（7タブ）
      ============================= */
      .nav-tabs {
        display: flex;
        gap: 18px;
        list-style: none;
        padding: 0;
        margin: 0 0 30px 0;
        border-bottom: 2px solid #ddd;
      }

      .nav-tabs li {
        margin: 0;
      }

      .nav-tabs a {
        display: inline-block;
        padding: 8px 14px;
        text-decoration: none;
        color: #333;
        font-weight: 600;
        border-radius: 6px 6px 0 0;
      }

      .nav-tabs a:hover {
        background: #f0f0f0;
      }

      /* 選択中タブ */
      .nav-tabs a.active {
        background: #f0f4ff;
  color: #000;                /* 黒字のほうが見やすい */
  border-bottom: 2px solid #ddd;
  font-weight: 700;
      }

      /* flash メッセージ */
      .flash {
        background: #ffeebb;
        border: 1px solid #e0c97f;
        padding: 10px 16px;
        margin: 20px 0;
        border-radius: 6px;
      }

      /* ============================
         テーブル共通デザイン
      ============================ */
      table {
        border-collapse: collapse;
        width: 100%;
        margin-top: 20px;
      }

      table th,
      table td {
        padding: 6px 10px;
        border: 1px solid #ddd;
        text-align: left;
      }

      /* ヘッダー行 */
      table thead tr {
        background: #f0f4ff; /* 薄い青 */
        font-weight: bold;
        border-bottom: 2px solid #b8c6e6;
      }

      /* 交互行ストライプ */
      table tbody tr:nth-child(odd) {
        background: #ffffff;
      }
      table tbody tr:nth-child(even) {
        background: #f7f7f7;
      }

      /* 行 hover */
      table tbody tr:hover {
        background: #e8f2ff;
      }

      /* 合計行 */
      table tfoot tr,
      .total-row {
        background: #fff8d5;
        font-weight: bold;
        border-top: 2px solid #e0cd99;
      }

      /* 売上原価（COGS）専用ハイライト */
      .cogs-row td {
        background: #fff3bf !important;
        font-weight: bold;
      }

      /* ============================
         月次利用量（usage_report）専用
      ============================ */
      table.monthly-table.usage-table {
        margin-top: 20px;
      }

      /* usage_table はストライプ無効（自前で管理） */
      table.monthly-table.usage-table tbody tr:nth-child(odd),
      table.monthly-table.usage-table tbody tr:nth-child(even) {
        background: #ffffff;
      }

      /* 左端列 & 指標列 */
      table.monthly-table.usage-table th:first-child,
      table.monthly-table.usage-table td:first-child {
        text-align: left;
      }
      table.monthly-table.usage-table td.metric-label {
        text-align: left;
        padding-left: 12px;
      }

      /* 数字の右寄せ */
      table.monthly-table.usage-table td.num {
        text-align: right;
      }

      /* 指標ごと色分け */
      table.monthly-table.usage-table .row-metric-pur td {
        background: #ffffff;
      }
      table.monthly-table.usage-table .row-metric-use td {
        background: #fff8e8;
        font-weight: 600;
      }
      table.monthly-table.usage-table .row-metric-stock td {
        background: #fafafa;
      }

     
{% if env == "dev" %}
  body {
    background: #fffaf0;   /* テスト環境：クリーム色 */
  }
  h1::before {
    content: "[DEV]";
    color: red;
    margin-right: 10px;
  }
{% else %}
  body {
    background: #ffffff;   /* 本番環境：白 */
  }
{% endif %}

    </style>

    {% block head_extra %}{% endblock %}
  </head>

  <body>
    <h1>TEST test tst 倉島事業開発 CMS PostGres Dev Env</h1>

    {% with messages = get_flashed_messages() %}
      {% if messages %}
        <div class="flash">
          {% for msg in messages %}
            <div>{{ msg }}</div>
          {% endfor %}
        </div>
      {% endif %}
    {% endwith %}

    <!-- ============================
         横タブメニュー（共通ナビ）
    ============================= -->
    <nav>
      <ul class="nav-tabs">
        <li><a href="{{ url_for('new_purchase') }}"
               class="{% if request.endpoint == 'new_purchase' %}active{% endif %}">
            仕入れ入力</a></li>

        <li><a href="{{ url_for('inventory_count') }}"
               class="{% if request.endpoint == 'inventory_count' %}active{% endif %}">
            棚卸し入力</a></li>

        <li><a href="{{ url_for('purchase_report') }}"
               class="{% if request.endpoint == 'purchase_report' %}active{% endif %}">
            仕入れ照会</a></li>

        <li><a href="{{ url_for('usage_report') }}"
               class="{% if request.endpoint == 'usage_report' %}active{% endif %}">
            月次利用量照会</a></li>

        <li><a href="{{ url_for('cost_report') }}"
               class="{% if request.endpoint == 'cost_report' %}active{% endif %}">
            売上原価月次推移</a></li>

        <li><a href="{{ url_for('suppliers_master') }}"
               class="{% if request.endpoint == 'suppliers_master' %}active{% endif %}">
            仕入先マスタ</a></li>

        <li><a href="{{ url_for('items_master') }}"
               class="{% if request.endpoint == 'items_master' %}active{% endif %}">
            品目マスタ</a></li>
      </ul>
    </nav>

    {% block content %}{% endblock %}
    {% block body_extra %}{% endblock %}
  </body>
</html>
